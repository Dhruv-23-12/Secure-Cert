{% extends "base.html" %}

{% block styles %}
.marksheet-content {
padding: 40px;
box-sizing: border-box;
height: 100%;
}
.header {
border-bottom: 2px solid #1f2937;
padding-bottom: 20px;
margin-bottom: 20px;
display: flex;
justify-content: space-between;
align-items: flex-start;
}
.logo-area {
display: flex;
align-items: center;
gap: 15px;
}
.ppsu-logo {
width: 60px;
height: 60px;
background-color: #1e3a8a;
color: white;
display: flex;
align-items: center;
justify-content: center;
font-weight: bold;
font-size: 20px;
border-radius: 4px;
}
.uni-info h1 {
margin: 0;
font-size: 18px;
color: #111827;
}
.uni-info p {
margin: 2px 0;
font-size: 12px;
color: #4b5563;
}
.title {
text-align: center;
color: #dc2626;
font-size: 24px;
font-weight: bold;
margin-top: 10px;
}
.info-table {
width: 100%;
border-collapse: collapse;
margin-bottom: 20px;
border: 1px solid #1f2937;
font-size: 14px;
}
.info-table td {
padding: 8px 12px;
border-bottom: 1px solid #1f2937;
}
.info-label {
background-color: #f9fafb;
font-weight: 600;
border-right: 1px solid #1f2937;
width: 30%;
}
.performance-table {
width: 100%;
border-collapse: collapse;
margin-bottom: 20px;
border: 1px solid #1f2937;
font-size: 14px;
}
.performance-table th {
background-color: #f3f4f6;
border-bottom: 2px solid #1f2937;
border-right: 1px solid #1f2937;
padding: 8px 12px;
text-align: left;
font-weight: 600;
}
.performance-table td {
border-bottom: 1px solid #d1d5db;
border-right: 1px solid #d1d5db;
padding: 8px 12px;
}
.summary-grid {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 20px;
margin-bottom: 20px;
}
.summary-box {
border: 1px solid #1f2937;
}
.summary-header {
background-color: #f3f4f6;
border-bottom: 1px solid #1f2937;
padding: 8px;
text-align: center;
font-weight: 600;
font-size: 14px;
}
.result-box {
border: 2px solid #1f2937;
padding: 10px;
text-align: center;
margin-bottom: 20px;
}
.grade-patterns {
font-size: 12px;
margin-bottom: 20px;
}
.footer {
border-top: 2px solid #1f2937;
padding-top: 20px;
display: flex;
justify-content: space-between;
align-items: flex-end;
}
.qr-container {
display: flex;
flex-direction: column;
align-items: center;
}
.qr-box {
border: 2px solid #9ca3af;
padding: 4px;
background: white;
margin-bottom: 5px;
}
.signature-area {
text-align: center;
}
.signature-line {
border-top: 2px solid #1f2937;
width: 150px;
margin: 10px auto 5px;
}
.disclaimer {
font-size: 10px;
color: #4b5563;
text-align: center;
border-top: 1px solid #d1d5db;
margin-top: 15px;
padding-top: 10px;
}
{% endblock %}

{% block content %}
<div class="marksheet-content">
    <!-- Header -->
    <div class="header">
        <div class="logo-area">
            <div class="ppsu-logo">PPSU</div>
            <div class="uni-info">
                <h1>P P SAVANI UNIVERSITY</h1>
                <p>NH 8, GETCO, Near Biltech, Village: Dhamdod Kosamba</p>
                <p>Dist.: Surat - 394125</p>
                <p style="color: #2563eb;">www.ppsu.ac.in</p>
            </div>
        </div>
        <div style="text-align: right;">
            <div
                style="background-color: #2563eb; color: white; padding: 4px 12px; border-radius: 4px; font-size: 12px; font-weight: bold; display: inline-block;">
                NAAC A+ GRADE
            </div>
        </div>
    </div>

    <h2 class="title" style="text-align: center; width: 100%;">OFFICIAL MARKSHEET</h2>

    <!-- Info -->
    <div style="display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 10px;">
        <div><strong>Date:</strong> {{ date }}</div>
        <div><strong>Report No.:</strong> {{ reportNo }}</div>
    </div>

    <table class="info-table">
        <tr>
            <td class="info-label">NAME OF STUDENT</td>
            <td>{{ studentName }}</td>
        </tr>
        <tr>
            <td class="info-label">ENROLLMENT NO.</td>
            <td>{{ enrollmentNo }}</td>
        </tr>
        <tr>
            <td class="info-label">SEMESTER</td>
            <td>{{ semester }}</td>
        </tr>
        <tr>
            <td class="info-label">MONTH-YEAR</td>
            <td>{{ academicYear }}</td>
        </tr>
    </table>

    <table class="info-table">
        <tr>
            <td class="info-label">INSTITUTION</td>
            <td>{{ institution }}</td>
        </tr>
        <tr>
            <td class="info-label">PROGRAMME</td>
            <td>{{ course }}</td>
        </tr>
    </table>

    <!-- Subjects -->
    <table class="performance-table">
        <thead>
            <tr>
                <th>COURSE CODE</th>
                <th>COURSE NAME</th>
                <th>EVALUATION</th>
                <th style="text-align: center;">CREDITS</th>
                <th style="text-align: center;">GRADE</th>
            </tr>
        </thead>
        <tbody>
            {% for subject in subjects %}
            <tr>
                <td>{{ subject.code }}</td>
                <td>{{ subject.name }}</td>
                <td>{{ subject.evaluation }}</td>
                <td style="text-align: center;">{{ subject.credits }}</td>
                <td style="text-align: center; font-weight: bold;">{{ subject.grade }}</td>
            </tr>
            {% endfor %}
            <!-- Pad empty rows if needed -->
            {% if subjects.length < 6 %} {% for i in range(0, 6 - subjects.length) %} <tr>
                <td style="height: 32px;"></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                </tr>
                {% endfor %}
                {% endif %}
        </tbody>
    </table>

    <!-- Summary -->
    <div style="display: flex; gap: 20px; margin-bottom: 20px;">
        <div class="summary-box" style="flex: 1;">
            <div class="summary-header">CURRENT SEMESTER PERFORMANCE</div>
            <table style="width: 100%; font-size: 14px; border-collapse: collapse;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #d1d5db; background: #f9fafb; font-weight: 600;">
                        REGISTERED CREDITS</td>
                    <td style="padding: 8px; border-bottom: 1px solid #d1d5db; text-align: center;">{{
                        performance.currentSemester.registeredCredits }}</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #d1d5db; background: #f9fafb; font-weight: 600;">
                        EARNED CREDITS</td>
                    <td style="padding: 8px; border-bottom: 1px solid #d1d5db; text-align: center;">{{
                        performance.currentSemester.earnedCredits }}</td>
                </tr>
                <tr>
                    <td style="padding: 8px; background: #f9fafb; font-weight: 600;">SGPA</td>
                    <td style="padding: 8px; text-align: center; font-weight: bold;">{{ performance.currentSemester.sgpa
                        }}</td>
                </tr>
            </table>
        </div>
        <div class="summary-box" style="flex: 1;">
            <div class="summary-header">CUMULATIVE PERFORMANCE</div>
            <table style="width: 100%; font-size: 14px; border-collapse: collapse;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #d1d5db; background: #f9fafb; font-weight: 600;">
                        EARNED CREDITS</td>
                    <td style="padding: 8px; border-bottom: 1px solid #d1d5db; text-align: center;">{{
                        performance.cumulative.earnedCredits }}</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #d1d5db; background: #f9fafb; font-weight: 600;">
                        CGPA</td>
                    <td style="padding: 8px; border-bottom: 1px solid #d1d5db; text-align: center; font-weight: bold;">
                        {{ performance.cumulative.cgpa }}</td>
                </tr>
                <tr>
                    <td style="padding: 8px; background: #f9fafb; font-weight: 600;">NO. OF BACKLOGS</td>
                    <td style="padding: 8px; text-align: center;">{{ performance.cumulative.backlogs }}</td>
                </tr>
            </table>
        </div>
    </div>

    <!-- Result -->
    <div class="result-box">
        <div style="font-size: 18px; font-weight: bold; margin-bottom: 5px;">FINAL RESULT</div>
        <div style="font-size: 20px; font-weight: bold; color: #1e3a8a;">PASSED</div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <div class="qr-container">
            <div class="qr-box">
                <img src="{{ qrCodeDataUri }}" width="96" height="96" alt="QR Code">
            </div>
        </div>

        <div class="signature-area">
            <div class="signature-line"></div>
            <p style="font-size: 12px; font-weight: bold; margin: 0;">REGISTRAR</p>
            <p style="font-size: 12px; margin: 0;">P P SAVANI UNIVERSITY</p>
        </div>
    </div>

    <div class="disclaimer">
        <p>This is a computer generated report, signature is not required. In case of discrepancy office results will be
            considered as final.</p>
        <p>Printed on: {{ printedOn }}</p>
    </div>
</div>
{% endblock %}